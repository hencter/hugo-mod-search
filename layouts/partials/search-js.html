<!-- This is the JavaScript of the search element. 
     It can be included with a partial if you want to customise the search page. -->

<!-- If you don't need IE 11 support you can remove this next script block -->
<script type="text/javascript">
   // @license magnet:?xt=urn:btih:1f739d935676111cfff4b4693e3816e664797050&dn=gpl-3.0.txt GPL-v3-or-Later
   if (window.navigator.userAgent.indexOf('Trident/') > 0) {
      let urls = [
         {{ "js/libs/iecompat/promises.min.js" | absURL }},
         {{ "js/libs/iecompat/fetch.min.js" | absURL }},
         {{ "js/libs/iecompat/template.min.js" | absURL }},
         {{ "js/libs/iecompat/remove.min.js" | absURL }}
      ];
      let head = document.getElementsByTagName("head")[0];
      urls.forEach(function(url) {
        let script = document.createElement("script");
        script.src = url;
        head.appendChild(script);
      });
   }
   // @license-end
</script>
<!-- These are the two libraries needed for current browsers. -->
{{ partial "htmlmin-ignore-comment" . }}<script src={{ "js/libs/fuse.js/3.2.1/fuse.min.js" | absURL }}></script>{{ partial "htmlmin-ignore-comment" . }}
{{ partial "htmlmin-ignore-comment" . }}<script src={{ "js/libs/mark.js/9.0.0/mark.min.js" | absURL }}></script>{{ partial "htmlmin-ignore-comment" . }}

<!-- Below works *only if* this theme component is named "hugo-search-fuse-js"
     AND *if* the themesDir is left at the default value of "themes".  -->
{{ $search_js_md5 := (readFile "themes/hugo-search-fuse-js/static/js/search.js" | md5) }}
{{ partial "htmlmin-ignore-comment" . }}<script src={{ printf "%s?%s" ("js/search.js" | absURL) $search_js_md5 }}></script>{{ partial "htmlmin-ignore-comment" . }}